{% extends 'base.html'%}

{% block title %} Chain Details {% endblock %}

{% block content %}

<div class="content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card strpied-tabled-with-hover">
          <div class="card-header ">
            <h4 class="card-title">{{ chain.name }}</h4>
            <p class="card-category">{{ chain.time_stamp }}</p>
          </div>
          <div class="card-body table-full-width table-responsive">
            <table class="table table-hover table-striped" id="schoolstable">
              <thead>
                <tr>

                  <th style="pointer-events: none;">Block</th>
                  

                </tr>
              </thead>
              <tbody style="word-break: break-word;">
                {% if chain.block_set %}
                {% for block in chain.block_set.all %}
                <tr>

                  <td align="center" style="display: block;">


                    <div class="chain-colors" align="center" class="mb-5" style="width: 70%">


                      <div style="border-style: solid; display: block; width: 100%;">
                        <h4><b>Índice do Bloco:</b> {{ block.index }}</h4>
                        <h4>{{ block.contract.name }}</h4>
                        <div style="margin-left: auto; margin-right: auto; word-wrap: none; white-space: nowrap;">
                          <b>Hash:</b> {{ block.hash }}
                        </div>
                        <div style="margin-left: auto; margin-right: auto;  word-wrap: none; white-space: nowrap;">
                          <b>Hash Anterior:</b> {{ block.previous_hash }}
                        </div>
                        <div style="margin-left: auto; margin-right: auto;">
                          <b>Data e Hora:</b> {{ block.time_stamp }}
                        </div>
                        <div style="margin-left: auto; margin-right: auto;">
                          <b>Nó do Bloco:</b> {{ block.nonce }}
                        </div>
                        <div style="margin-left: auto; margin-right: auto;">
                          <b>Estudante associado ao bloco:</b> {{ block.contract.student_name }}
                        </div>
                        <div style="margin-left: auto; margin-right: auto;">
                          <b>Quem assinou o contrato:</b>
                            {% if block.hash == block.contract.first_auth_hash %}
                            {{ block.contract.first_auth_signe.name }}
                            {% elif block.hash == block.contract.second_auth_hash %}
                            {{ block.contract.second_auth_signe.name }}
                            {% elif block.hash == block.contract.counter_auth_hash %}
                            {{ block.contract.counter_signe.name }}
                          {% endif %}
                        </div>    
                      </div>

                      {% if forloop.last %}

                      {% else %}
                        <!--Arrow--> 
                        <i style="font-size:40px" align="center" class="fas fa-long-arrow-alt-down mt-1"></i>
                      {% endif %}
                    </div>



                  </td>

                </tr>
                {% endfor %}
                {% endif %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function () {
    $('#schoolstable').DataTable();
  });
</script>
{% endblock %}