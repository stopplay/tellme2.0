{% extends 'base.html'%}

{% block title %} Criar um Novo Usuário {% endblock %}

{% block content %}
<script>
$(document).ready(function() {
  $('.container').removeClass('container');
});
</script>


<div class="content">
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-8">
				<div class="card">
					<div class="card-header">
						<h4 class="card-title">Criar um Novo Usuário</h4>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="col-md-5 pr-1">
								<div class="form-group">
									<form method="POST" class=""> {% csrf_token %}

										<div class="clearfix"></div>
										<div class="labelandform">
										<select class="custom-select " id="select_form">
											<option id="" value="" selected>Selecione o Tipo de Usuário</option>
											<option value="head_school">Diretor</option>
											<option value="teacher">Professor</option>
											<option value="admin">Admin</option>
											<option value="supervisor">Supervisor</option>
											<option value="parent">Pai/Mãe</option>
											<option value="student">Estudante</option>
										</select>
									</div>
									<div id="pai">
									</div>
									<input type="hidden" id="selected_user" name="selected_user" value="0">
                  <div class="clearfix"></div>
                  					{% if is_supervisor %}
                  						<div class="clearfix"></div>
										<div class="labelandform">
										<select class="custom-select " id="select_form_school">
											<option id="" value="" selected>Selecione a Escola</option>
											{% for school in schools %}
												<option value="{{ school.school_id }}">{{ school.school_name }}</option>
											{% endfor %}
										</select>
									</div>
									<input type="hidden" id="selected_school" name="selected_school" value="0">
                  <div class="clearfix"></div>
                  {% endif %}

										<div class="form-group">
												<label>Nome: </label>

										<div class="">
												{{ form.first_name }}
										</div>
                    </div>
										<div class="form-group">
											<label>Sobrenome: </label>

										<div class="">
												{{ form.last_name }}
										</div>
                    </div>
										<div class="form-group">
											<label>Email: </label>

										<div class="">
												{{ form.email }}
										</div>
                    </div>

										<div class="form-group">
											{% if form.username.errors %}
										    <ol>
										    {% for error in form.username.errors %}
										        <li><strong>{{ error|escape }}</strong></li>
										    {% endfor %}
										    </ol>
										{% endif %}
											<label>Nome de Usuário: </label>

										<div class="">
											{{ form.username }}
										</div>
                    </div>

										<div class="form-group">
											{% if form.password1.errors %}
										    <ol>
										    {% for error in form.password1.errors %}
										        <li><strong>{{ error|escape }}</strong></li>
										    {% endfor %}
										    </ol>
										{% endif %}
											<label>Senha: </label>

										<div class="">
											{{ form.password1 }}
										</div>
                    </div>

										<div class="form-group">
											{% if form.password1.errors %}
										    <ol>
										    {% for error in form.password2.errors %}
										        <li><strong>{{ error|escape }}</strong></li>
										    {% endfor %}
										    </ol>
										{% endif %}
											<label>Confirmação de Senha: </label>

									<div class="">
											{{ form.password2 }}
										</div>
                    </div>
								<div>	<button class="btn btn-info btn-fill pull-left" type="submit">Criar Usuário</button></div>
								</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){
		$('#pai').children('div').hide();
		$('#pai').children('div').remove();
		$('#select_form').on('change',function(){
			var selectValor = $(this).val();
			if (selectValor == '') {
				$('#pai').children('div').remove();
				document.getElementById('selected_user').value = '0'
			}
			else if(selectValor == 'head_school'){
				document.getElementById('selected_user').value = '1'
			}
			else if(selectValor == 'teacher'){
				document.getElementById('selected_user').value = '2'
			}
			else if(selectValor == 'admin'){
				document.getElementById('selected_user').value = '3'
			}
			else if(selectValor == 'supervisor'){
				document.getElementById('selected_user').value = '4'
			}
			else if(selectValor == 'parent'){
				document.getElementById('selected_user').value = '5'
			}
			else if(selectValor == 'student'){
				document.getElementById('selected_user').value = '6'
			}
			$('#pai').children('div').hide();
			$('#pai').children('#'+selectValor).show();
		});
	});
	$(document).ready(function(){
		$('#select_form_school').on('change',function(){
			var selectValor = $(this).val();
			if (selectValor == '') {
				$('#pai').children('div').remove();
				document.getElementById('selected_school').value = '0'
			}
			else{
				document.getElementById('selected_school').value = selectValor
			}
		});
	});
</script>

{% endblock %}
